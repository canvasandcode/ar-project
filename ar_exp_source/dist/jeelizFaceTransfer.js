 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACETRANSFERAPI=(function(){function ja(b){var c=new XMLHttpRequest;c.open("GET",a.Ta+a.save,!0);c.withCredentials=!1;c.onreadystatechange=function(){4===c.readyState&&200===c.status&&b(c.responseText)};c.send()}function wa(){for(var b=a.yb,c=Array(b),e=0;e<b;++e)c[e]=0;return c}function za(b,c,e){b=Math.min(Math.max((e-b)/(c-b),0),1);return b*b*(3-2*b)}function Aa(b,c,e){return Math.min(Math.max((e-b)/(c-b),0),1)}function Ca(b,c,e,g){return Math.pow(Math.min(Math.max((g-b)/(c-b),0),1),e)}
function Ea(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ha(b,c){var e=c%8;return b[(c-e)/8]>>7-e&1}
function Ia(b){var c=JSON.parse(b);b=c.ne;var e=c.nf,g=c.n,l="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data),k=l.length,t;c=new Uint8Array(k);for(t=0;t<k;++t)c[t]=l.charCodeAt(t);l=new Float32Array(g);k=new Float32Array(e);t=b+e+1;var n,h;for(n=0;n<g;++n){var m=t*n;var u=0===Ha(c,m)?1:-1;var v=m+1;var B=1,E=0;for(h=v+b-1;h>=v;--h)E+=B*Ha(c,h),B*=2;h=E;v=c;B=m+1+b;E=k;var L=0,P=E.length;for(m=B;m<B+P;++m)E[L]=Ha(v,m),++L;for(m=v=0;m<e;++m)v+=k[m]*Math.pow(2,-m-
1);u=0===v&&0===h?0:u*(1+v)*Math.pow(2,1+h-Math.pow(2,b-1));l[n]=u}return l}
var w=function(){function b(f,x){f=q.createShader(f);q.shaderSource(f,x);q.compileShader(f);return q.getShaderParameter(f,q.COMPILE_STATUS)?f:!1}function c(f,x){f=b(q.VERTEX_SHADER,f);x=b(q.FRAGMENT_SHADER,x);var z=q.createProgram();q.attachShader(z,f);q.attachShader(z,x);q.linkProgram(z);return z}function e(f){void 0===f.$&&(f.$="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===f.ca&&(f.ca=["a0"]);void 0===f.U&&(f.U=
[2]);if(void 0===f.precision||"highp"===f.precision)f.precision=h;f.id=t++;void 0!==f.Vc&&f.Vc.forEach(function(z,ba){f.c=f.c.replace(z,f.pa[ba])});f.Sa=0;f.U.forEach(function(z){f.Sa+=4*z});f.oa=c(f.$,"precision "+f.precision+" float;\n"+f.c);f.l={};f.f.forEach(function(z){f.l[z]=q.getUniformLocation(f.oa,z)});f.attributes={};f.V=[];f.ca.forEach(function(z){var ba=q.getAttribLocation(f.oa,z);f.attributes[z]=ba;f.V.push(ba)});if(f.h){q.useProgram(f.oa);k=f;l=f.id;for(var x in f.h)q.uniform1i(f.l[x],
f.h[x])}f.Md=!0}function g(f){Ja.ad(G);l!==f.id&&(G.S(),l=f.id,k=f,q.useProgram(f.oa),f.V.forEach(function(x){0!==x&&q.enableVertexAttribArray(x)}))}var l=-1,k=!1,t=0,n=!1,h="highp",m=["u1"],u=["u0"],v={u1:0},B={u0:0},E={u1:0,u2:1},L={u3:0},P={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:m,h:v},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:m,h:v,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],h:E},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:m,h:v},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],h:E},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:m,h:v},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:m,h:v},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],h:B},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],h:B},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:m,h:v},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],h:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],h:v},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],h:v},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:u,h:B},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:u,h:B},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:u,h:B},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:u,h:B},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],h:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:u,h:B},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:u,h:B},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],h:B},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],h:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],h:v},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],h:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],h:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),h:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),h:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],h:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],h:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:m,h:v,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u28"],h:v,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u28"],h:v,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u29"],h:E},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u29"],h:E},s34:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],h:L},s35:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],h:L},s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],h:v,precision:"lowp"},s37:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],h:v,precision:"lowp"},s38:{c:"uniform sampler2D u1,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u30","u31"],h:{u1:0,u30:1,u31:2}}},N={s39:{c:"uniform float u18,u32;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u32"],pa:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u18,u32,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u26,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u26;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u26,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u32".split(" "),pa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},G={Ja:function(){return n},i:function(){if(!n){h="highp";for(var f in P)e(P[f],f);w.set("s0");q.enableVertexAttribArray(0);f=Ka.i();n=!0;return f}},Rb:function(f){f.forEach(function(x){G.Xa(x)})},Xa:function(f){P[f.id]=f;e(f,f.id)},nb:function(f,x,z){x||(x=f);P[x]=Object.create(N[f]);N[f].pa&&N[f].pa.forEach(function(ba,pa){P[x].c=P[x].c.replace(new RegExp(ba,"g"),z[pa])});e(P[x],x)},set:function(f){g(P[f])},
lc:function(f){return"undefined"!==typeof P[f]},yd:function(){return k.vd},S:function(){-1!==l&&(l=-1,k.V.forEach(function(f){0!==f&&q.disableVertexAttribArray(f)}))},Pa:function(){var f=0;k.V.forEach(function(x,z){z=k.U[z];q.vertexAttribPointer(x,z,q.FLOAT,!1,k.Sa,f);f+=4*z})},ud:function(){q.enableVertexAttribArray(0)},Qa:function(){q.vertexAttribPointer(k.V[0],2,q.FLOAT,!1,8,0)},Yd:function(f,x){q.uniform1i(k.l[f],x)},A:function(f,x){q.uniform1f(k.l[f],x)},I:function(f,x,z){q.uniform2f(k.l[f],
x,z)},Zd:function(f,x){q.uniform2fv(k.l[f],x)},$d:function(f,x){q.uniform3fv(k.l[f],x)},Ib:function(f,x,z,ba){q.uniform3f(k.l[f],x,z,ba)},Jb:function(f,x){q.uniform4fv(k.l[f],x)},ae:function(f,x){q.uniformMatrix2fv(k.l[f],!1,x)},be:function(f,x){q.uniformMatrix3fv(k.l[f],!1,x)},ce:function(f,x){q.uniformMatrix4fv(k.l[f],!1,x)},C:function(f,x){G.set(f);x.forEach(function(z){switch(z.type){case "4f":q.uniform4fv(k.l[z.name],z.value);break;case "3f":q.uniform3fv(k.l[z.name],z.value);break;case "2f":q.uniform2fv(k.l[z.name],
z.value);break;case "1f":q.uniform1f(k.l[z.name],z.value);break;case "1i":q.uniform1i(k.l[z.name],z.value);break;case "mat2":q.uniformMatrix2fv(k.l[z.name],!1,z.value);break;case "mat3":q.uniformMatrix3fv(k.l[z.name],!1,z.value);break;case "mat4":q.uniformMatrix4fv(k.l[z.name],!1,z.value)}})},Fd:function(){return"lowp"}};return G}(),q=!1,Ma=function(){function b(h){console.log("ERROR in ContextFeedForward : ",h);return!1}var c=!1,e=!1,g=!1,l=!1,k=!0,t=!1,n={s:function(){return c.width},F:function(){return c.height},
ha:function(){return c},xd:function(){return q},m:function(){return k},flush:function(){q.flush()},pc:function(){t||(t=new Uint8Array(c.width*c.height*4));q.readPixels(0,0,c.width,c.height,q.RGBA,q.UNSIGNED_BYTE,t);return t},Ad:function(){return c.toDataURL("image/jpeg")},Bd:function(){D.D();e||(e=document.createElement("canvas"),g=e.getContext("2d"));e.width=c.width;e.height=c.height;var h=n.pc(),m=g.createImageData(e.width,e.height),u,v,B=e.width,E=e.height,L=m.data;for(v=0;v<E;++v){var P=E-v-1;
for(u=0;u<B;++u){var N=4*(v*B+u);var G=4*(P*B+u);L[N]=h[G];L[N+1]=h[G+1];L[N+2]=h[G+2];L[N+3]=h[G+3]}}g.putImageData(m,0,0);return e.toDataURL("image/png")},zd:function(h){!e&&h&&(e=document.createElement("canvas"),g=e.getContext("2d"));var m=h?e:document.createElement("canvas");m.width=c.width;m.height=c.height;(h?g:m.getContext("2d")).drawImage(c,0,0);return m},i:function(h){h.gb&&!h.fa?c=document.getElementById(h.gb):h.fa&&(c=h.fa);c||(c=document.createElement("canvas"));c.width=h&&void 0!==h.width?
h.width:512;c.height=h&&void 0!==h.height?h.height:512;"undefined"===typeof h&&(h={});void 0===h.premultipliedAlpha&&(h.premultipliedAlpha=!1);void 0===h.Ia&&(h.Ia=!0);void 0===h.antialias&&(h.antialias=!1);var m={antialias:h.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:h.premultipliedAlpha,stencil:!1,depth:h.Ia};a:{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var u=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);u=[parseInt(u[1],10),parseInt(u[2],10),
parseInt(u[3]||0,10)];if(12===u[0]||13===u[0]){u=!0;break a}}u=!1}u||(q=c.getContext("webgl2",m));q?k=!0:((q=c.getContext("webgl",m))||(q=c.getContext("experimental-webgl",m)),k=!1);if(!q)return b("WebGL is not enabled");(l=q.getExtension("WEBGL_lose_context"))&&c.addEventListener("webglcontextlost",h.Pc,!1);if(!La.i())return b("Not enough capabilities");if(!La.Zb()&&k)return b("Your configuration cannot process color buffer float");q.clearColor(0,0,0,0);q.disable(q.DEPTH_TEST);q.disable(q.BLEND);
q.disable(q.DITHER);q.disable(q.STENCIL_TEST);q.GENERATE_MIPMAP_HINT&&q.hint(q.GENERATE_MIPMAP_HINT,q.FASTEST);q.disable(q.SAMPLE_ALPHA_TO_COVERAGE);q.disable(q.SAMPLE_COVERAGE);return!0},Ld:function(){if(!w.i())return!1;q.depthFunc(q.LEQUAL);q.clearDepth(1);return!0}};return n}(),Ja=function(){var b="undefined"===typeof w?JEShaders:w;return{ad:function(c){b!==c&&(b.S(),b=c)},Ja:function(){return b.Ja()},Qa:function(){b.Qa()},Pa:function(){b.Pa()},S:function(){b.S()},set:function(c){b.set(c)}}}(),
H=function(){var b,c,e=0,g=-2,l=-2,k=!1,t={reset:function(){l=g=-2},i:function(){k||(b=q.createBuffer(),q.bindBuffer(q.ARRAY_BUFFER,b),q.bufferData(q.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),q.STATIC_DRAW),c=q.createBuffer(),q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,c),q.bufferData(q.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),q.STATIC_DRAW),t.ya(),k=!0)},a:function(n){var h=e++,m=n.J?n.J.length:0,u="undefined"===typeof n.mode?q.STATIC_DRAW:n.mode,v=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,
v);q.bufferData(q.ARRAY_BUFFER,n.Nb instanceof Float32Array?n.Nb:new Float32Array(n.Nb),u);g=h;if(n.J){var B=q.createBuffer();q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,B);if(65536>n.J.length){var E=Uint16Array;var L=q.UNSIGNED_SHORT;var P=2}else E=Uint32Array,L=q.UNSIGNED_INT,P=4;q.bufferData(q.ELEMENT_ARRAY_BUFFER,n.J instanceof E?n.J:new E(n.J),u);l=h}var N={Yb:function(G){g!==h&&(q.bindBuffer(q.ARRAY_BUFFER,v),g=h);G&&Ja.Pa()},Wb:function(){l!==h&&(q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,B),l=h)},bind:function(G){N.Yb(G);
N.Wb()},sd:function(){q.drawElements(q.TRIANGLES,m,L,0)},td:function(G,f){q.drawElements(q.TRIANGLES,G,L,f*P)},remove:function(){q.deleteBuffer(v);n.J&&q.deleteBuffer(B);N=null}};return N},ya:function(){-1!==g&&(q.bindBuffer(q.ARRAY_BUFFER,b),g=-1);-1!==l&&(q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,c),l=-1)},g:function(n,h){n&&H.ya();h&&Ja.Qa();q.drawElements(q.TRIANGLES,3,q.UNSIGNED_SHORT,0)},oc:function(){q.deleteBuffer(b);q.deleteBuffer(c)}};return t}(),D=function(){var b,c,e,g=!1,l={o:-2,mc:1};return{i:function(){if(!g){b=
q.createFramebuffer();var k=La.m();c=k&&q.DRAW_FRAMEBUFFER?q.DRAW_FRAMEBUFFER:q.FRAMEBUFFER;e=k&&q.READ_FRAMEBUFFER?q.READ_FRAMEBUFFER:q.FRAMEBUFFER;g=!0}},Dd:function(){return c},Da:function(){return e},O:function(){return q.FRAMEBUFFER},Gd:function(){return l},wd:function(){return b},a:function(k){void 0===k.ob&&(k.ob=!1);var t=k.fd?k.fd:!1,n=k.width,h=void 0!==k.height?k.height:k.width,m=b,u=!1,v=!1,B=0;t&&(n=n?n:t.s(),h=h?h:t.F());var E={Gb:function(){v||(m=q.createFramebuffer(),v=!0,B=l.mc++)},
Qb:function(){E.Gb();E.j();u=q.createRenderbuffer();q.bindRenderbuffer(q.RENDERBUFFER,u);q.renderbufferStorage(q.RENDERBUFFER,q.DEPTH_COMPONENT16,n,h);q.framebufferRenderbuffer(c,q.DEPTH_ATTACHMENT,q.RENDERBUFFER,u);q.clearDepth(1)},bind:function(L,P){B!==l.o&&(q.bindFramebuffer(c,m),l.o=B);t&&t.j();P&&q.viewport(0,0,n,h);L&&q.clear(q.COLOR_BUFFER_BIT|q.DEPTH_BUFFER_BIT)},md:function(){B!==l.o&&(q.bindFramebuffer(c,m),l.o=B)},clear:function(){q.clear(q.COLOR_BUFFER_BIT|q.DEPTH_BUFFER_BIT)},pd:function(){q.clear(q.COLOR_BUFFER_BIT)},
qd:function(){q.clear(q.DEPTH_BUFFER_BIT)},bd:function(){q.viewport(0,0,n,h)},j:function(){B!==l.o&&(q.bindFramebuffer(c,m),l.o=B)},rtt:function(L){t=L;l.o!==B&&(q.bindFramebuffer(q.FRAMEBUFFER,m),l.o=B);L.j()},D:function(){q.bindFramebuffer(c,null);l.o=-1},resize:function(L,P){n=L;h=P;u&&(q.bindRenderbuffer(q.RENDERBUFFER,u),q.renderbufferStorage(q.RENDERBUFFER,q.DEPTH_COMPONENT16,n,h))},remove:function(){q.bindFramebuffer(c,m);q.framebufferTexture2D(c,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,null,0);u&&
q.framebufferRenderbuffer(c,q.DEPTH_ATTACHMENT,q.RENDERBUFFER,null);q.bindFramebuffer(c,null);q.deleteFramebuffer(m);u&&q.deleteRenderbuffer(u);E=null}};k.ob&&E.Qb();return E},D:function(){q.bindFramebuffer(c,null);l.o=-1},hd:function(){q.bindFramebuffer(c,null);q.clear(q.COLOR_BUFFER_BIT|q.DEPTH_BUFFER_BIT);q.viewport(0,0,La.s(),La.F());l.o=-1},reset:function(){l.o=-2},H:function(){0!==l.o&&(q.bindFramebuffer(c,b),l.o=0)},clear:function(){q.viewport(0,0,La.s(),La.F());q.clear(q.COLOR_BUFFER_BIT)}}}(),
J=function(){function b(d){q.bindTexture(q.TEXTURE_2D,d)}function c(d){pa[0]=d;d=ua[0];var A=d>>16&32768,F=d>>12&2047,R=d>>23&255;return 103>R?A:142<R?A|31744|((255==R?0:1)&&d&8388607):113>R?(F|=2048,A|(F>>114-R)+(F>>113-R&1)):A=(A|R-112<<10|F>>1)+(F&1)}function e(d){var A=new Uint16Array(d.length);d.forEach(function(F,R){A[R]=c(F)});return A}function g(){if(null!==oa.Ea)return oa.Ea;var d=k(e([1,1,1,1]));return null===d?!0:oa.Ea=d}function l(){if(null!==oa.Fa)return oa.Fa;var d=k(new Uint8Array([255,
255,255,255]));return null===d?!0:oa.Fa=d}function k(d){if(!Ja.Ja()||!L)return null;d=X.a({isFloat:!1,B:!0,array:d,width:1});D.D();q.viewport(0,0,1,1);q.clearColor(0,0,0,0);q.clear(q.COLOR_BUFFER_BIT);Ja.set("s0");d.bb(0);H.g(!1,!0);var A=new Uint8Array(4);q.readPixels(0,0,1,1,q.RGBA,q.UNSIGNED_BYTE,A);A=.9<A[0];d.remove();D.H();return A}var t=0,n,h=0,m,u=!1,v,B,E,L=!1,P=!1,N,G,f,x=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],z=!1,ba=!1,pa=new Float32Array(1),ua=new Int32Array(pa.buffer),oa={Ea:null,
Fa:null},X={i:function(){if(!L){B=[q.RGB,!1,q.RGB,q.RGBA];E=[q.RGB,!1,q.RGB,q.RGBA];n=[q.TEXTURE0,q.TEXTURE1,q.TEXTURE2,q.TEXTURE3,q.TEXTURE4,q.TEXTURE5,q.TEXTURE6,q.TEXTURE7];z="undefined"!==typeof JEContext;ba="undefined"!==typeof La;z&&JEContext.Sd()&&n.push(q.TEXTURE8,q.TEXTURE9);m=[-1,-1,-1,-1,-1,-1,-1,-1];v=[q.UNSIGNED_BYTE,q.FLOAT,q.FLOAT];if(!u){for(var d=new Float32Array(16384),A=0;16384>A;++A)d[A]=2*Math.random()-1;u={random:X.a({isFloat:!0,isPot:!0,array:d,width:64}),Mb:X.a({isFloat:!1,
isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}L=!0}},yc:function(){X.jd()},Jd:function(){return u.Mb},jd:function(){v[1]=La.ia()},Xc:function(){E=B=[q.RGBA,q.RGBA,q.RGBA,q.RGBA]},Sc:function(d,A){w.set("s1");D.D();var F=d.s(),R=d.F();q.viewport(0,0,F,R);d.b(0);H.g(!1,!1);q.readPixels(0,0,F,R,q.RGBA,q.UNSIGNED_BYTE,A)},nc:function(d,A,F){q.activeTexture(q.TEXTURE0);t=0;var R=q.createTexture();b(R);var Y=La.m()&&q.RGBA32F?q.RGBA32F:q.FLOAT;A=A instanceof Float32Array?A:new Float32Array(A);var Z=
Math.log(A.length)/Math.log(2);Z!==Math.floor(Z)&&(q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE));q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST);q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,F);q.texImage2D(q.TEXTURE_2D,0,q.RGBA,d.s(),d.F(),0,q.RGBA,Y,A);b(null);q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,!1);D.H();w.set("s0");d.u();q.clearColor(0,0,0,0);q.clear(q.COLOR_BUFFER_BIT);
b(R);H.g(!0,!1);q.deleteTexture(R)},a:function(d){function A(){b(fa);ra&&q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,ra);d.isPot?(q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,d.qb?q.MIRRORED_REPEAT:q.REPEAT),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,d.K?q.MIRRORED_REPEAT:q.REPEAT)):(q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE));d.la&&"undefined"!==typeof JESETTINGS&&q.texParameterf(q.TEXTURE_2D,JEContext.Cd().TEXTURE_MAX_ANISOTROPY_EXT,
JESETTINGS.ld);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,d.isLinear?q.LINEAR:q.NEAREST);d.isLinear?q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,d.isMipmap&&!xa?q.NEAREST_MIPMAP_LINEAR:q.LINEAR):q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,d.isMipmap&&!xa?q.NEAREST_MIPMAP_NEAREST:q.NEAREST);ka=B[d.Z-1];ha=E[d.Z-1];na=v[F];if(La.m()){var r=q.RGBA32F;ka===q.RGBA&&na===q.FLOAT&&r&&(ha=r);ka===q.RGB&&na===q.FLOAT&&r&&(ha=r,ka=q.RGBA)}if(d.B&&!d.isFloat||d.isFloat&&d.isMipmap&&Ka.Bc())(r=
q.RGBA16F)&&(ha=r),na=La.ia();d.tb&&"undefined"!==typeof q.texStorage2D&&(M=d.tb);d.rb&&4===d.Z&&(ka=JEContext.Hd());if(d.v)q.texImage2D(q.TEXTURE_2D,0,ha,ka,na,d.v);else if(d.url)q.texImage2D(q.TEXTURE_2D,0,ha,ka,na,qa);else if(aa){try{q.getError(),q.texImage2D(q.TEXTURE_2D,0,ha,K,y,0,ka,na,aa),q.getError()!==q.NO_ERROR&&(q.texImage2D(q.TEXTURE_2D,0,ha,K,y,0,ka,na,null),q.getError()!==q.NO_ERROR&&q.texImage2D(q.TEXTURE_2D,0,q.RGBA,K,y,0,q.RGBA,q.UNSIGNED_BYTE,null))}catch(ca){q.texImage2D(q.TEXTURE_2D,
0,ha,K,y,0,ka,na,null)}d.isKeepArray||(aa=null)}else q.texImage2D(q.TEXTURE_2D,0,ha,K,y,0,ka,na,null);if(d.isMipmap)if(!xa&&C)C.Ca(),la=!0;else if(xa){r=Math.log(Math.min(K,y))/Math.log(2);var S;ya=Array(1+r);ya[0]=fa;for(S=1;S<=r;++S){var Q=Math.pow(2,S);var I=K/Q;Q=y/Q;var O=q.createTexture();b(O);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST);q.texImage2D(q.TEXTURE_2D,0,ha,I,Q,0,ka,na,null);b(null);ya[S]=O}la=!0}b(null);
m[t]=-1;ra&&q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,!1);U=!0;da&&C&&(da(C),da=!1)}"undefined"===typeof d.isFloat&&(d.isFloat=!1);"undefined"===typeof d.B&&(d.B=!1);"undefined"===typeof d.isPot&&(d.isPot=!0);"undefined"===typeof d.isLinear&&(d.isLinear=!1);"undefined"===typeof d.isMipmap&&(d.isMipmap=!1);"undefined"===typeof d.za&&(d.za=!1);void 0===d.la&&(d.la=!1);void 0===d.K&&(d.K=!1);void 0===d.qb&&(d.qb=!1);void 0===d.rb&&(d.rb=!1);void 0===d.Z&&(d.Z=4);void 0===d.pb&&(d.pb=!1);"undefined"===typeof d.isFlipY&&
(d.isFlipY=d.url||d.array?!0:!1);"undefined"===typeof d.isKeepArray&&(d.isKeepArray=!1);d.data&&(d.array="string"===typeof d.data?Ia(d.data):d.isFloat?new Float32Array(d.data):new Uint8Array(d.data),d.isFlipY=!1);var F=0,R=d.v?!0:!1,Y=null,Z=null,ea=!1,ta=null;d.isFloat&&(d.B=!0);d.B&&(F=1);d.pb||La.m()||!d.isFloat||!ba||La.eb()||(d.isFloat=!1);d.isFloat&&(F=2);d.la&&z&&!JEContext.Nd()&&(d.la=!1);var fa=q.createTexture(),da=d.za,qa=null,aa=!1,K=0,y=0,U=!1,V=h++,T=!1,ia,va,Da,Ba,ha,ka,na,ra=d.isFlipY,
xa=d.B&&d.isMipmap&&"undefined"!==typeof Ka&&!Ka.ac()?!0:!1,ya,M=-1,la=!1;"undefined"!==typeof d.width&&d.width&&(K=d.width,y="undefined"!==typeof d.height&&d.height?d.height:K);var C={get:function(){return fa},s:function(){return K},F:function(){return y},Kd:function(){return d.url},Od:function(){return d.isFloat},Qd:function(){return d.B},Rd:function(){return d.isLinear},Ca:function(){q.generateMipmap(q.TEXTURE_2D)},cb:function(r,S){xa?(r||(r=C.jb()),C.xa(S),b(ya[r]),m[S]=-1):C.b(S)},jb:function(){-1===
M&&(M=Math.log(K)/Math.log(2));return M},ib:function(r){if(xa){r||(r=C.jb());w.set("s11");C.xa(0);var S,Q=K,I=y;for(S=1;S<=r;++S)Q/=2,I/=2,w.I("u7",.25/Q,.25/I),q.viewport(0,0,Q,I),b(ya[S-1]),q.framebufferTexture2D(D.O(),q.COLOR_ATTACHMENT0,q.TEXTURE_2D,ya[S],0),H.g(!1,1===S);m[0]=-1}else C.Ca()},xa:function(r){r!==t&&(q.activeTexture(n[r]),t=r)},b:function(r){if(!U)return!1;C.xa(r);if(m[r]===V)return!1;b(fa);m[r]=V;return!0},bb:function(r){q.activeTexture(n[r]);t=r;b(fa);m[r]=V},j:function(){q.framebufferTexture2D(D.O(),
q.COLOR_ATTACHMENT0,q.TEXTURE_2D,fa,0)},u:function(){q.viewport(0,0,K,y);q.framebufferTexture2D(D.O(),q.COLOR_ATTACHMENT0,q.TEXTURE_2D,fa,0)},fe:function(){q.framebufferTexture2D(D.O(),q.COLOR_ATTACHMENT0,q.TEXTURE_2D,null,0)},resize:function(r,S){K=r;y=S;A()},clone:function(r){r=X.a({width:K,height:y,B:d.B,isFloat:d.isFloat,isLinear:d.isLinear,K:d.K,isFlipY:r?!ra:ra,isPot:d.isPot});Ja.set("s0");D.H();r.j();q.viewport(0,0,K,y);C.b(0);H.g(!0,!0);return r},bd:function(){q.viewport(0,0,K,y)},remove:function(){q.deleteTexture(fa);
C=null},refresh:function(){C.bb(0);ra&&q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,!0);R?q.texImage2D(q.TEXTURE_2D,0,ha,ka,q.UNSIGNED_BYTE,d.v):q.texImage2D(q.TEXTURE_2D,0,ha,K,y,0,ka,na,aa);ra&&q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,!1)},fb:function(){var r=K*y*4;va=[new Uint8Array(r),new Uint8Array(r),new Uint8Array(r),new Uint8Array(r)];ia=[new Float32Array(va[0].buffer),new Float32Array(va[1].buffer),new Float32Array(va[2].buffer),new Float32Array(va[3].buffer)];Da=new Uint8Array(4*r);Ba=new Float32Array(Da.buffer);
T=!0},Oa:function(){T||C.fb();q.readPixels(0,0,K,4*y,q.RGBA,q.UNSIGNED_BYTE,Da);var r,S=K*y,Q=2*S,I=3*S;for(r=0;r<S;++r)ia[0][r]=Ba[r],ia[1][r]=Ba[r+S],ia[2][r]=Ba[r+Q],ia[3][r]=Ba[r+I];return ia},Aa:function(){D.D();w.set("s12");C.b(0);for(var r=0;4>r;++r)q.viewport(0,y*r,K,y),w.Jb("u8",x[r]),H.g(!1,0===r)},ge:function(r){var S=na===v[0]&&!l();b(fa);ra&&q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,ra);S?(ea||(Y=document.createElement("canvas"),Y.width=K,Y.height=y,Z=Y.getContext("2d"),ta=Z.createImageData(K,
y),ea=!0),ta.data.set(r),Z.putImageData(ta,0,0),q.texImage2D(q.TEXTURE_2D,0,ha,ka,na,Y)):q.texImage2D(q.TEXTURE_2D,0,ha,K,y,0,ka,na,r);m[t]=V;ra&&q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,!1)},he:function(r,S){b(fa);q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,S);q.texImage2D(q.TEXTURE_2D,0,ha,ka,na,r);m[t]=V;S&&q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,!1)},Wd:function(r,S){var Q=K*y,I=4*Q;r=d.B?r?"RGBE":"JSON":"RGBA";S&&(r=S);S=La.m()&&!1;switch(r){case "RGBE":var O="s41";break;case "JSON":O=S?"s0":"s12";break;case "RGBA":case "RGBAARRAY":O=
"s6"}T||("RGBA"===r||"RGBE"===r||"RGBAARRAY"===r?(va=new Uint8Array(I),T=!0):"JSON"!==r||S||C.fb());D.D();w.set(O);C.b(0);if("RGBA"===r||"RGBE"===r||"RGBAARRAY"===r){q.viewport(0,0,K,y);H.g(!0,!0);q.readPixels(0,0,K,y,q.RGBA,q.UNSIGNED_BYTE,va);if("RGBAARRAY"===r)return{data:va};P||(N=document.createElement("canvas"),G=N.getContext("2d"),P=!0);N.width=K;N.height=y;f=G.createImageData(K,y);f.data.set(va);G.putImageData(f,0,0);var ca=N.toDataURL("image/png")}else if("JSON"===r)if(S)ca=new Float32Array(Q),
q.viewport(0,0,K,y),H.g(!0,!0),q.readPixels(0,0,K,y,q.RGBA,q.FLOAT,ca);else{for(ca=0;4>ca;++ca)q.viewport(0,y*ca,K,y),w.Jb("u8",x[ca]),H.g(!ca,!ca);C.Oa();ca=Array(Q);for(O=0;O<Q;++O)ca[4*O]=ia[0][O],ca[4*O+1]=ia[1][O],ca[4*O+2]=ia[2][O],ca[4*O+3]=ia[3][O]}return{format:r,data:ca,width:K,height:y,isMirrorY:d.K,isFlipY:"RGBA"===r?d.isFlipY:!d.isFlipY}}};d.isMipmap&&!xa&&U&&!la&&(C.Ca(),la=!0);if(d.url)b(fa),q.texImage2D(q.TEXTURE_2D,0,q.RGBA,1,1,0,q.RGBA,q.UNSIGNED_BYTE,null),qa=new Image,qa.rd="Anonymous",
qa.crossOrigin="Anonymous",qa.src=d.url,qa.onload=function(){K=qa.width;y=qa.height;A()};else if(d.v){var ma=function(){K=void 0!==d.v.videoWidth?d.v.videoWidth:d.v.width;y=void 0!==d.v.videoHeight?d.v.videoHeight:d.v.height;K?A():setTimeout(ma,1)};ma()}else d.array?(d.B&&!d.isFloat?d.array instanceof Uint16Array?(aa=d.array,A()):g()?(aa=e(d.array),A()):(A(),X.nc(C,d.array,ra)):(aa=d.isFloat?d.array instanceof Float32Array?d.array:new Float32Array(d.array):d.array instanceof Uint8Array?d.array:new Uint8Array(d.array),
A()),d.isKeepArray||(aa&&aa!==d.array&&(aa=null),delete d.array)):A();C.vc=C.s;da&&U&&(da(C),da=!1);return C},D:function(d){d!==t&&(q.activeTexture(n[d]),t=d);m[d]=-1;b(null)},nd:function(d){u.random.b(d)},reset:function(){for(var d=0;d<n.length;++d)m[d]=-1;t=-1},Vd:function(){t=-1},de:function(){for(var d=0;d<n.length;++d)X.D(d)},oc:function(){u&&(u.random.remove(),u.Mb.remove())},ee:function(d,A){if("RGBA"===d.format||"RGBE"===d.format){var F=new Image;F.src=d.data;F.onload=function(){X.a({K:d.isMirrorY,
isFlipY:d.isFlipY,isFloat:!1,v:F,za:function(R){if("RGBA"===d.format)A(R);else{var Y=d.width,Z=d.height,ea=X.a({K:d.isMirrorY,isFloat:!0,width:Y,height:Z,isFlipY:d.isFlipY});D.H();q.viewport(0,0,Y,Z);w.set("s42");ea.j();R.b(0);H.g(!0,!0);X.D(0);A(ea);q.flush();setTimeout(R.remove,50)}}})}}else"JSON"===d.format?A(X.a({isFloat:!0,isFlipY:d.isFlipY,width:d.width,height:d.height,array:new Float32Array(d.data)})):A(!1)}};return X}(),Na={a:function(b){var c=[J.a(b),J.a(b)],e=[c[1],c[0]],g=e,l={Hb:function(k){g[1].j();
g[0].b(k);l.Lb()},Xd:function(k){g[1].u();g[0].b(k);l.Lb()},Lb:function(){g=g===c?e:c},refresh:function(){g[0].refresh();g[1].refresh()},b:function(k){g[0].b(k)},qc:function(){return g[0]}};return l}},La=function(){function b(){c="undefined"===typeof Ma?JEContext:Ma;e=!0}var c,e=!1,g=!1,l=!1,k=!1,t=!1,n=!1,h=!1,m=!1,u=!1,v=!1,B=!1,E=!0,L=!0,P=!0,N=!1,G="undefined"===typeof window?{}:window,f={i:function(){if(e)return!0;b();f.hb();f.Ba();f.jc();f.kc();D.i();J.i();if(!f.ec())return!1;H.i();J.yc();return!0},
s:function(){e||b();return c.s()},F:function(){e||b();return c.F()},m:function(){e||b();return c.m()},jc:function(){B=(v=q.getExtension("EXT_color_buffer_float")||q.getExtension("WEBGL_color_buffer_float")||q.getExtension("OES_color_buffer_float"))?!0:!1;G.GL_EXT_COLORBUFFERFLOAT=v},kc:function(){q.getExtension("EXT_color_buffer_half_float")||q.getExtension("WEBGL_color_buffer_half_float")||q.getExtension("OES_color_buffer_half_float")},hb:function(){if(!g){this.m()||(l=q.getExtension("OES_texture_float")||
q.getExtension("MOZ_OES_texture_float")||q.getExtension("WEBKIT_OES_texture_float"),t=(G.GL_EXT_FLOAT=l)?!0:!1);if(t||this.m())k=q.getExtension("OES_texture_float_linear")||q.getExtension("MOZ_OES_texture_float_linear")||q.getExtension("WEBKIT_OES_texture_float_linear"),G.GL_EXT_FLOATLINEAR=k;g=!0}},Ba:function(){if(!u){if(!this.m()){if(n=q.getExtension("OES_texture_half_float")||q.getExtension("MOZ_OES_texture_half_float")||q.getExtension("WEBKIT_OES_texture_half_float"))N=n.HALF_FLOAT_OES,h=!0;
!N&&q.HALF_FLOAT&&(N=q.HALF_FLOAT);!N&&q.FLOAT&&(N=q.FLOAT);G.GL_EXT_HALFFLOAT=n}if(h||this.m())m=q.getExtension("OES_texture_half_float_linear")||q.getExtension("MOZ_OES_texture_half_float_linear")||q.getExtension("WEBKIT_OES_texture_half_float_linear"),G.GL_EXT_HALFFLOATLINEAR=m;u=!0}},ia:function(){if(f.m())return q.HALF_FLOAT;f.Ba();return h?N:q.FLOAT},eb:function(){return E},$b:function(){return L},od:function(){return P},Zb:function(){return B},gc:function(){L=E=!0;var x=q.createFramebuffer();
q.bindFramebuffer(q.FRAMEBUFFER,x);var z=q.createTexture();q.bindTexture(q.TEXTURE_2D,z);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST);q.texImage2D(q.TEXTURE_2D,0,f.m()&&q.RGBA32F?q.RGBA32F:q.RGBA,1,1,0,q.RGBA,q.FLOAT,null);q.framebufferTexture2D(D.O(),q.COLOR_ATTACHMENT0,q.TEXTURE_2D,z,0);var ba=q.checkFramebufferStatus(D.Da());ba!==q.FRAMEBUFFER_COMPLETE&&(E=!1);q.texImage2D(q.TEXTURE_2D,0,f.m()&&q.RGBA16F?q.RGBA16F:q.RGBA,
1,1,0,q.RGBA,f.ia(),null);q.framebufferTexture2D(D.O(),q.COLOR_ATTACHMENT0,q.TEXTURE_2D,z,0);ba=q.checkFramebufferStatus(D.Da());ba!==q.FRAMEBUFFER_COMPLETE&&(L=!1);q.bindTexture(q.TEXTURE_2D,null);q.bindFramebuffer(q.FRAMEBUFFER,null);q.deleteTexture(z);q.deleteFramebuffer(x)},fc:function(){var x=D.a({width:1});x.Gb();var z=J.a({width:1,isFloat:!0,Z:3});x.j();z.j();q.flush();q.checkFramebufferStatus(D.Da())!==q.FRAMEBUFFER_COMPLETE?(J.Xc(),P=!1):P=!0;x.remove();z.remove()},ec:function(){f.gc();if(!E&&
!L)return!1;f.fc();return!0}};return f}(),Ka=function(){function b(E,L,P,N){q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,N?q.NEAREST_MIPMAP_NEAREST:q.LINEAR);try{var G=q.getError();G!==q.NO_ERROR&&console.log("GLERR in test_mipmapping() :",G);q.texImage2D(q.TEXTURE_2D,0,E,2,2,0,q.RGBA,L,P);G=q.getError();if(G!==q.NO_ERROR)return!1}catch(f){return!1}N&&q.generateMipmap(q.TEXTURE_2D);H.ya();H.g(!1,!0);q.readPixels(0,0,1,1,q.RGBA,q.UNSIGNED_BYTE,n);G=q.getError();G===q.INVALID_OPERATION&&"undefined"!==
typeof q.PIXEL_PACK_BUFFER&&(q.bindBuffer(q.PIXEL_PACK_BUFFER,null),q.readPixels(0,0,1,1,q.RGBA,q.UNSIGNED_BYTE,n),G=q.getError());return G!==q.NO_ERROR?!1:0!==n[0]}function c(E){return La.eb()&&b(internalPixelFormat32f,q.FLOAT,new Float32Array(m),E)?(k=l.Va,!0):!1}function e(E){return La.$b()?b(v,La.ia(),new Uint16Array(m),E)||b(v,q.FLOAT,new Float32Array(m),E)?(k=l.ta,!0):!1:!1}var g=!1,l={Va:3,ta:2,RGBA8:0},k=l.RGBA8,t,n=new Uint8Array(4),h=[.8,1,.8,1],m=h.concat(h,h,h),u=!0,v,B={i:function(){La.hb();
La.Ba();v=q.RGBA;if(Ma.m()){var E=q.RGBA16F;E&&(v=E)}H.i();D.reset();D.D();q.viewport(0,0,1,1);w.set("s0");g=!0;t=q.createTexture();q.activeTexture(q.TEXTURE0);q.bindTexture(q.TEXTURE_2D,t);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.REPEAT);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.REPEAT);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST);if(e(!0)||c(!0))return!0;u=!1;if(e(!1)||c(!1))return!0;if(Ma.m()){v=q.RGBA;if(e(!0)||c(!0))return!0;u=!1;if(e(!1)||c(!1))return!0}return!1},
ac:function(){return u},Ed:function(){return k},Pd:function(){g||B.i();return k===l.Va},Bc:function(){g||B.i();return k===l.ta}};return B}(),Oa={a:function(b){var c=J.a(b.alpha),e=J.a(b.beta);return{ic:function(){c.b(1);e.b(2)}}}},Ra={a:function(b){var c=b.dd;c.index=b.index;c.L=b.L;c.parent=b.parent;switch(c.type){case "input":b=Pa.a(c);break;default:b=Qa.a(c)}return b}},Pa={a:function(b){"undefined"===typeof b.sift&&(b.sift=!1);"undefined"===typeof b.DWT&&(b.DWT=!1);"undefined"===typeof b.blur&&
(b.blur=!1);"undefined"===typeof b.siftOutWidth&&(b.siftOutWidth=!1);"undefined"===typeof b.density&&(b.density=1);var c=!1;if(b.mask){c=!0;a&&void 0!==a.Ub&&(b.mask=a.Ub+b.mask);var e=J.a({isFloat:!1,url:b.mask})}var g=!1,l="undefined"!==typeof b.preprocessing?b.preprocessing:!1,k=!1,t=!1;b.sift?Sift.i({xc:q,fa:!1,width:b.size,Ud:b.siftOutWidth}):b.DWT&&DWT.i({xc:q,fa:!1,width:b.size});var n=!1;b.customInputShader&&(n="s43",w.Xa({name:"_",id:n,c:b.customInputShader,f:["uSource"],precision:"lowp"}),
w.C(n,[{type:"1i",name:"_",value:0}]));switch(l){case "sobel":var h="s32";k=!0;break;case "meanNormalization":h="s33";k=!0;break;case "grayScale":h="s29";k=!1;break;case "grayScaleTilt":h="s30";t=!0;k=!1;break;case "rgbGrayTilt":h="s31";t=!0;k=!1;break;case "copy":h=n?n:"s0";break;case "inputLightRegulation":h=n?n:"s29";Sa.i({width:b.size,vb:b.nBlurPass,Ac:!1});g=!0;break;case "direct":case "none":h=!1;break;default:h="s3"}t&&w.C(h,[{name:"u28",type:"1f",value:b.tilt}]);c&&(h+="Mask");if(b.blur)var m=
J.a({isFloat:!1,isPot:!1,width:b.size});var u=J.a({isFloat:!1,isPot:!1,width:b.size}),v={s:function(){return b.sift?Sift.Y():b.size},Y:function(){return v.s()},tc:function(){return b.sift?Sift.ja():b.DWT?DWT.ja():g?Sa.ja():u},w:function(){D.H();b.blur&&(m.u(),w.set("s44"),w.I("u7",1/b.size,1/b.size),H.g(!1,!0),m.b(0));h&&(w.set(h),k&&w.A("u29",1/b.size),u.u(),c&&e.b(1),H.g(!1,!1),u.b(0),g?Sa.Na(u):b.sift?(w.S(),Sift.Na()):b.DWT&&(w.S(),DWT.Na(4)))}};return v}},Qa={a:function(b){"undefined"===typeof b.disableNormalize&&
(b.disableNormalize=!1);var c=[],e=[],g,l,k=!1,t,n=!0,h,m,u=b.isReorganize?b.isReorganize:!1,v=b.kernelsNumber?!0:!1,B=b.dynPelu?Oa.a(b.dynPelu):!1,E=B?!0:!1,L={isEnabled:!1},P;if("softmax"===b.type){b.activation="softmax";b.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(b.num_classes))/Math.log(2)));b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.L.Y();b.gain="undefined"!==typeof b.gain?b.gain:1;w.C("s20",[{type:"1f",name:"u10",value:b.gain}]);var N=J.a({isFloat:!0,isPot:!1,width:b.size}),
G=J.a({isFloat:!0,isPot:!1,width:b.size,isMipmap:!0});n=!1;var f=new Uint8Array(Math.pow(4*b.size,2)),x;for(x=0;x<b.size*b.size;++x){var z=x<b.num_classes?255:0;f[4*x]=z;f[4*x+1]=z;f[4*x+2]=z;f[4*x+3]=z}var ba=J.a({isFloat:!1,isPot:!1,width:b.size,array:f})}else b.cost?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.L.Y(),n=!1):"full"===b.connectivityUp&&(b.sparsity=b.L.Y());var pa={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[b.activation],
ua=b.sparsity*b.sparsity,oa=!1,X=b.size;if(b.maxPooling){switch(b.maxPooling.size){case 2:var d="s34";break;case 4:d="s35"}oa=!0;X/=b.maxPooling.size;var A=J.a({isFloat:!0,isPot:!1,width:X})}var F=void 0!==b.Oc&&b.Oc?!0:!1,R=null,Y=null,Z=null;F&&(R="s45"+b.index.toString(),w.nb("s45",R,[((b.normalization.n-1)/2).toFixed(1)]),w.C(R,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},
{type:"1f",name:"u33",value:b.normalization.k}]),Y=J.a({isFloat:!0,isPot:!0,width:b.size}),Z=J.a({isFloat:!0,isPot:!0,width:b.size}));var ea,ta,fa,da;n&&(da=J.a({isFloat:!0,isPot:!1,width:b.size}));var qa=J.a(b.bias),aa,K={s:function(){return b.size},Y:function(){return X},kb:function(){return b.num_classes},Xb:function(y){P.b(y)},Rc:function(){b.remap&&b.remap.isEnabled&&(L={isEnabled:!0,Dc:J.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,
isPot:!1}),layers:b.remap.layers.map(function(y){return b.parent.rc(y)}),depth:b.remap.depth})},Zc:function(){switch(b.connectivityUp){case "gaussian":aa=Ta.a(b.connectivity);break;case "direct":aa=Ua.a(b.connectivity);break;case "square":aa=Va.a(b.connectivity);break;case "squareFast":aa=Wa.a(b.connectivity,b.activation);break;case "full":aa=Xa.a(b.connectivity);break;case "conv":m=b.kernelsNumber,aa=Ya.a(b.connectivity),u&&(h=J.a({width:X,isFloat:!0,isFlipY:!1,isPot:!1}))}if(aa.M){var y=b.size*
b.sparsity;ta=Math.log(y/b.size)/Math.log(2);ea=J.a({isMipmap:!0,isFloat:!0,isPot:!0,width:y,tb:ta});fa=J.a({isFloat:!0,isPot:!0,width:b.size})}},w:function(y,U){P=y;aa.M?(ea.u(),v&&qa.b(2),aa.w(L),ea.b(0),ea.ib(ta),fa.u(),v?w.set("s0"):(w.set("s28"),w.A("u27",ua),qa.b(1)),ea.cb(ta,0),H.g(!1,!1),w.set(pa),F?Y.j():da.j(),fa.b(0),E&&B.ic(),H.g(!1,!1)):(da.u(),qa.b(1),aa.w());F&&(w.set(R),Z.j(),Y.b(0),H.g(!1,!1),w.set("s46"),w.A("u6",1),da.j(),Z.b(1),H.g(!1,!1));if(n)return oa?(A.u(),da.b(0),w.set(d),
w.I("u7",1/b.size,1/b.size),H.g(!1,!1),U=A):U=da,U.b(0),u&&(h.j(),w.set("s22"),w.I("u14",m,X/m),H.g(!1,!1),U=h,h.b(0)),U;if("softmax"===b.type){w.set("s20");da.b(0);N.j();H.g(!1,!1);b.disableNormalize?y=N:(w.set("s2"),N.b(0),ba.b(1),G.j(),H.g(!1,!1),w.set("s0"),l.u(),G.b(0),G.ib(!1),H.g(!1,!1),w.set("s21"),g.u(),G.cb(!1,0),w.A("u12",da.vc()),l.b(1),H.g(!1,!1),y=g);if(U){switch(k){case "cpuRGBAAvg":break;default:var V=K.Ab(y)}return V}return!1}if(b.cost){w.set("gpuRawAvg"===k?"s8":"s7");U=da;b.disableNormalize||
(w.A("u4",1/b.size),g.u(),da.b(0),H.g(!1,!1),U=g);switch(k){case "cpuRGBA2Float":U.Aa();V=K.Ab(U);t(V);break;case "gpuRawAvg":case "gpuRaw":U.b(0),t(U)}return!1}},dc:function(y){y&&"undefined"!==typeof y.zb&&(k=y.zb,t=y.Qc);da=J.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===b.type,width:b.size});"softmax"===b.type&&(l=J.a({isFloat:!0,isPot:!0,width:1}));var U=0,V=0,T="undefined"!==typeof b.num_classes&&b.num_classes?b.num_classes:b.size*b.size;for(y=0;y<T;++y)c.push(U+(b.size-1-V)*b.size),e.push([-1,
-1,-1,-1]),++U,U===b.size&&(U=0,++V);b.disableNormalize||(g=J.a({isFloat:!0,isPot:!0,width:b.size}))},Ab:function(y){y.Aa();var U=y.Oa();c.forEach(function(V,T){e[T][0]=U[0][V];e[T][1]=U[1][V];e[T][2]=U[2][V];e[T][3]=U[3][V]});return e}};b.L&&K.Zc(b.L);return K}};
function Za(){var b={},c,e;b||(b={});this.rc=function(g){return c[g]};this.Wc=function(g){var l=!1;c=g.map(function(k,t){return l=k=Ra.a({index:t,parent:this,dd:k,L:l})});e=c[c.length-1];c.forEach(function(k,t){0!==t&&k.Rc()})};this.w=function(g,l){var k=l;c.forEach(function(t){k=t.w(k,g)});return k};this.uc=function(){return e.s()};this.ja=function(){return e.tc()};this.Yc=function(g){e.dc(g)};this.kb=function(){return e.kb()}}
var Ua={a:function(b){var c=J.a(b.weights);delete b.weights.data;return{M:!0,X:function(){return 1},wc:function(){return c},w:function(){w.set("s27");c.b(1);H.g(!1,!1)}}}},Xa={a:function(b){var c=b.fromLayerSize,e=J.a(b.weights);return{M:!0,X:function(){return c},w:function(g){if(g.isEnabled){w.set("s25");g.Dc.b(3);var l,k=Math.min(g.layers.length,g.depth);for(l=0;l<k;++l)g.layers[l].Xb(4+l)}else w.set("s24");w.A("u18",b.toLayerSize);e.b(1);H.g(!1,!1)}}}},Ta={a:function(b){var c=b.toSparsity*b.toLayerSize,
e=c/b.fromLayerSize,g=J.a(b.weights);J.a({width:c,isFloat:!0,array:new Float32Array(b.fromBindings),isPot:!0});var l=J.a({width:c,isFloat:!0,array:new Float32Array(b.toBindings),isPot:!0});return{M:!0,X:function(){return e},w:function(){w.set("s23");g.b(1);l.b(2);H.g(!1,!0)}}}},Va={a:function(b){var c=b.fromLayerSize,e=b.toLayerSize,g=b.toSparsity,l=g*e,k=l/c,t=c/e,n,h,m,u,v=0,B=0,E=0,L=Array(g*e*g*e*4),P=Array(g*e*g*e*4),N=Array(c*c);for(n=0;n<N.length;++n)N[n]=0;var G=Math.floor(g/2),f=.5/e,x=.5/
c,z=.5/l;for(n=0;n<e;++n)for(h=0;h<e;++h){var ba=Math.round(n*t);var pa=Math.round(h*t);var ua=n/e;var oa=h/e;ua+=f;oa+=f;for(m=0;m<g;++m)for(u=0;u<g;++u){var X=v/l;var d=B/l;var A=ba+m-G;var F=pa+u-G;0>A&&(A+=c);0>F&&(F+=c);A>=c&&(A-=c);F>=c&&(F-=c);var R=A/c;var Y=F/c;d=1-d-1/l;R+=x;Y+=x;X+=z;d+=z;var Z=n*g+m,ea=h*g+u;ea=e*g-ea-1;Z=ea*e*g+Z;L[4*Z]=X;L[4*Z+1]=d;L[4*Z+2]=R;L[4*Z+3]=Y;R=N[F*c+A]++;Y=R%k;A=A*k+Y;F=F*k+(R-Y)/k;F=c*k-1-F;F=F*c*k+A;P[4*F]=X;P[4*F+1]=d;P[4*F+2]=ua;P[4*F+3]=oa;++v>=l&&(v=
0,++B);++E}}var ta=J.a(b.weights);J.a({width:l,isFloat:!0,array:new Float32Array(P),isPot:!0});P=null;var fa=J.a({width:l,isFloat:!0,array:new Float32Array(L),isPot:!0});L=null;return{M:!0,X:function(){return k},w:function(){w.set("s23");ta.b(1);fa.b(2);H.g(!1,!1)}}}},Ya={a:function(b){var c=b.kernelsNumber,e=b.toSparsity,g=e*b.toLayerSize/b.fromLayerSize,l=J.a(b.weights);return{M:!0,X:function(){return g},Id:function(){return e},wc:function(){return l},w:function(){w.set("s26");w.A("u24",c);w.A("u25",
e);w.A("u18",b.toLayerSize);w.A("u26",b.fromLayerSize);l.b(1);H.g(!1,!1)}}}},Wa={a:function(b,c){var e=b.fromLayerSize,g=b.toLayerSize,l=b.toSparsity,k=b.stride?b.stride:1,t=l*g/e,n=g<e,h=e/g,m=J.a(b.weights),u="s47"+[e.toString(),g.toString(),l.toString(),k.toString(),c].join("_");w.lc(u)||(b=Ea(c),g=[{type:"1f",name:"u18",value:g},{type:"1f",name:"u32",value:k}],n&&g.push({type:"1f",name:"u26",value:e}),e=[(n?t:l).toFixed(1),b],n&&e.push(h.toFixed(1)),w.nb(n?"s40":"s39",u,e),w.C(u,g.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{M:!1,X:function(){return t},w:function(){w.set(u);m.b(3);H.g(!1,!1)}}}},Sa=function(){var b,c,e,g,l,k,t,n,h;return{i:function(m){b=m.vb?m.vb:3;c=m.width?m.width:64;g=m.Ac?!0:!1;m={isFloat:!1,width:c,isPot:!1,isFlipY:!1};l=J.a(m);k=J.a(m);t=J.a(m);n=J.a(m);h=J.a({isFloat:!0,width:c,isPot:!1,isFlipY:!1});e=1/c},Na:function(m){w.set("s37");for(var u=0;u<b;++u)l.j(),w.I("u7",e,0),H.g(g,!1),k.j(),l.b(0),w.I("u7",
0,e),H.g(g,!1),k.b(0);w.set("s36");n.j();m.b(0);H.g(g);w.set("s37");for(u=0;u<b;++u)t.j(),n.b(0),w.I("u7",e,0),H.g(g,!1),n.j(),t.b(0),w.I("u7",0,e),H.g(g,!1);w.set("s38");h.j();m.b(0);k.b(1);n.b(2);H.g(g,!1);h.b(0)},ja:function(){return h}}}();function $a(b,c){b[c]=!0;b.setAttribute(c,"true")}function ab(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function bb(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]}function cb(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function db(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function eb(b){if(!b)return b;var c=!1;if(b.video){var e=function(g){var l={};"undefined"!==typeof g.min&&(l.min=g.min);"undefined"!==typeof g.max&&(l.max=g.max);"undefined"!==typeof g.ideal&&(l.ideal=g.ideal);return l};c={};"undefined"!==typeof b.video.width&&(c.width=e(b.video.width));"undefined"!==typeof b.video.height&&(c.height=e(b.video.height));"undefined"!==typeof b.video.facingMode&&(c.facingMode=b.video.facingMode)}c={audio:b.audio,video:c};"undefined"!==typeof b.deviceId&&(c.deviceId=b.deviceId);
return c}function fb(b){var c=b.video.width;b.video.width=b.video.height;b.video.height=c;return b}
function gb(b){function c(v){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(B,E){return Math.abs(B-v)-Math.abs(E-v)})}function e(v){var B=eb(b);g.push(v(B))}var g=[];if(!b||!b.video)return g;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal)for(var l=c(b.video.width.ideal).slice(0,3),k=c(b.video.height.ideal).slice(0,3),t=0,n;t<l.length;++t){n=l[t];for(var h=0,m;h<k.length;++h)if(m=k[h],n!==b.video.width.ideal||m!==b.video.height.ideal){var u=
Math.max(n,m)/Math.min(n,m);u<4/3-.1||u>16/9+.1||e(function(v){v.video.width.ideal=n;v.video.height.ideal=m;return v})}}e(function(v){return fb(v)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&e(function(v){delete v.video.width.ideal;delete v.video.height.ideal;return v}),e(function(v){delete v.video.width;delete v.video.height;return v}));b.video.facingMode&&(e(function(v){delete v.video.facingMode;return v}),b.video.width&&b.video.height&&e(function(v){fb(v);delete v.video.facingMode;
return v}));g.push({audio:b.audio,video:!0});return g}function hb(b){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(g){c=window.innerHeight>window.innerWidth}if(c&&b&&b.video){c=b.video.width;var e=b.video.height;c&&e&&c.ideal&&e.ideal&&c.ideal>e.ideal&&(b.video.height=c,b.video.width=e)}}
function ib(b){b.volume=0;$a(b,"muted");if(cb()){if(1===b.volume){var c=function(){b.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){b.volume=0;$a(b,"muted")},5)}}
function jb(b,c,e,g){function l(t){k||(k=!0,e(t))}var k=!1;navigator.mediaDevices.getUserMedia(g).then(function(t){function n(){setTimeout(function(){if(b.currentTime){var h=b.videoWidth,m=b.videoHeight;if(0===h||0===m)l("VIDEO_NULLSIZE");else{h&&(b.style.width=h.toString()+"px");m&&(b.style.height=m.toString()+"px");h={bc:null,cd:null,Gc:null};try{var u=t.getVideoTracks()[0];u&&(h.Gc=u,h.bc=u.getCapabilities(),h.cd=u.getSettings())}catch(v){}cb()||ab()?b.parentNode&&null!==b.parentNode?(k||c(b,t,
h),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),ib(b),k||c(b,t,h),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";ib(b);setTimeout(function(){b.play()},100)},80)):k||c(b,t,h)}}else l("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=t:(b.src=window.URL.createObjectURL(t),b.videoStream=t);ib(b);b.addEventListener("loadeddata",function(){var h=b.play();ib(b);"undefined"===typeof h?
n():h.then(function(){n()}).catch(function(){l("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(t){l(t)})}
function kb(b,c,e){var g=db()?document.createElement("video"):!1;if(g)if(db()){if(e&&e.video){if(ab()){var l=bb();(12>l[0]||12===l[0]&&2>l[1])&&hb(e)}e.video.width&&e.video.width.ideal&&(g.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(g.style.height=e.video.height.ideal+"px")}$a(g,"autoplay");$a(g,"playsinline");e&&e.audio?g.volume=0:$a(g,"muted");jb(g,b,function(){function k(n){if(0===n.length)c("INVALID_FALLBACKCONSTRAINS");else{var h=n.shift();jb(g,b,function(){k(n)},
h)}}var t=gb(e);k(t)},e)}else c&&c("MEDIASTREAMAPI_NOTFOUND");else c&&c("VIDEO_NOTPROVIDED")}
var lb=function(){var b=0,c,e,g,l;return{i:function(k,t){b=k.length;c=t;e=k;g=new Float32Array(b);l=new Float32Array(b)},sc:function(){return l},ed:function(k,t,n){k.forEach(function(h,m){var u=Math.min(1,e[m]*n*(t+.33*(1-t)));h=u*h+(1-u)*g[m];g[m]=h;l[m]=c[m](h)})}}}(),W={T:[],va:!1,wa:!1,ua:!1,Wa:!1,ba:!0,aa:!1,ready:!1,initialized:!1},mb={facingMode:"user",idealWidth:320,idealHeight:240,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280},a={save:"jeelizFaceTransferNNC.json",
Ta:"../../",Tb:0,ka:64,width:512,height:512,Hc:.25,Ec:.7,Lc:3,borderWidth:.4,W:.35,Mc:5,Nc:3,Ra:[.06,.08,.15],gd:55,Ic:.6,Fc:5.8,Pb:.75,Ob:1,Ya:[.03,1],kd:20,da:.2,N:[30,55],Ua:3,Vb:1/3.5,yb:11,ub:1,Jc:1,Za:[.1,.01],Tc:[.4,-.7,-.4],Uc:[.3,0,0],Fb:[5,7],hc:!1,R:[0,7],ab:.001,$a:[Math.PI/10,Math.PI/6],Bb:[0,6],Cb:[.1,.4],Db:[.009,.02],Eb:[.02,.04],La:8,mb:[3,7],lb:.05,Sb:[.2,.2,.15,.15,.15,.15,.2,.2,.15,.15,.2],Kc:[za.bind(null,.05,.7),za.bind(null,.05,.7),za.bind(null,0,.4),za.bind(null,0,.4),za.bind(null,
0,.6),za.bind(null,0,.6),Aa.bind(null,.1,.6),za.bind(null,.1,.4),Ca.bind(null,.68,.77,2),Ca.bind(null,.68,.77,2),za.bind(null,.15,.5)]};W.get_nMorphs=function(){return a.yb};var nb=!1,ob=!1;
function pb(){var b,c,e,g,l,k,t,n,h,m,u;function v(){1===++K&&(lb.i(a.Sb,a.Kc),B(),W.ready=!0,W.T.forEach(function(M){M()}),W.T.splice(0,W.T.length),E(),K=0)}function B(){Y=wa();Z=new Uint8Array(pa*pa*4);W.get_morphTargetInfluences=function(){return Y};W.get_morphTargetInfluencesStabilized=function(){return lb.sc()};W.set_morphUpdateCallback=function(M){qa=M};W.get_rotation=function(){return ta};W.get_positionScale=function(){var M=F.Kb.qc();M.Aa();M=M.Oa();aa[0]=1-M[1][0];aa[1]=M[2][0];aa[2]=M[3][0]*
ua[0];return aa};W.get_rotationStabilized=function(){return da};W.switch_sleep=function(M){U!==y.qa||M?U=M?y.qa:y.ga_:E()};W.on_detect=function(M){M(V.G);V.Ma.push(M)};W.is_detected=function(){return V.G};W.set_animateDelay=function(M){f=M}}function E(){U!==y.ga_&&(U=y.ga_,T.timestamp=Date.now(),x&&window.clearTimeout(x),z&&window.cancelAnimationFrame(z),P())}function L(){U!==y.qa&&(x=setTimeout(P,f))}function P(){var M=d.currentTime-xa;0>M&&(xa=d.currentTime);1E3*M<a.kd||(A.refresh(),xa+=M,w.set("s49"),
D.H(),F.Ga.u(),A.b(0),H.g(!1,!0));M=U===y.ga_?T.na:1;for(var la=0;la<M;++la){var C=F,ma=ba;w.set("s50");D.H();C.Ha.u();C.Ga.b(0);C.ra.b(1);H.g(!1,!1);C.Ha.b(0);ma.w(!1,C.Ha)}W.ba&&(D.hd(),w.set("s5"),F.Ga.b(0),H.g(!1,!1),q.enable(q.BLEND),q.blendFunc(q.SRC_ALPHA,q.ONE),R.b(0),H.g(!1,!1),q.disable(q.BLEND));q.flush();la=Date.now();C=la-T.timestamp;T.timestamp=la;T.wb=M/C;T.Ka=T.wb*a.da+T.Ka*(1-a.da);T.xb=1E3/C;T.P=T.xb*a.da+T.P*(1-a.da);T.P>a.N[1]?(++T.na,T.P=(a.N[0]+a.N[1])/2):T.P<a.N[0]&&(T.na=Math.max(T.na-
1,a.Ua),T.P=(a.N[0]+a.N[1])/2);T.ea=a.Vb/Math.max(T.Ka,.001);U!==y.qa&&(z=window.requestAnimationFrame(L))}var N,G,f=a.Tb,x=!1,z=!1,ba,pa,ua,oa,X,d,A,F={},R,Y=!1,Z,ea=[0,0,0],ta=[0,0,0],fa=[0,0,0],da=[0,0,0],qa=!1,aa=[0,0,0],K=0,y={Cc:-2,qa:-1,ga_:0},U=y.Cc,V={ma:0,G:!1,Ma:[]},T={timestamp:0,wb:0,Ka:0,na:a.Ua,xb:0,P:0,ea:1},ia=1,va=1,Da=1,Ba=1,ha=[0,0,0],ka=Date.now(),na=new Float32Array(a.La),ra=0,xa=0,ya={zc:function(){N=a.width;G=a.height;oa=a.Hc;X=a.Ec;var M=N/a.ka;oa*=M;X*=M;l=(1-2*a.borderWidth)/
a.Mc;k=(1-2*a.W)/a.Nc;t=(X-oa)/a.Lc;n=a.borderWidth;h=a.W;m=1-a.borderWidth;u=1-a.W;b=0;c=a.borderWidth;e=a.W;g=oa;ua=[a.ka/N,a.ka/G]},i:function(M){function la(){var Q=C(a.mb[0],a.mb[1]);V.ma=a.lb*Q+(1-a.lb)*V.ma;.6<V.ma&&!V.G?(V.Ma.forEach(function(I){I(!0)}),V.G=!0):.4>V.ma&&V.G&&(V.Ma.forEach(function(I){I(!1)}),V.G=!1)}function C(Q,I){Q+=pa*I;return(Z[4*Q]+Z[4*Q+1]+Z[4*Q+2]+Z[4*Q+3])/1020}function ma(){Y.forEach(function(Q,I){if(V.G){Q=(a.ub+I)%pa;var O=a.Jc+Math.floor((a.ub+I)/pa);O=pa-1-O;
Q=C(Q,O);Y[I]=Q}else Y[I]=0})}function r(Q){ba=new Za;ba.Wc(Q.layers);ba.Yc({zb:"gpuRaw",Qc:function(I){var O=F;O.ra.Hb(1);q.viewport(0,0,1,1);w.set("s51");w.A("u47",ia);w.Ib("u39",c,e,g);w.Ib("u40",1*a.Ra[0],1*a.Ra[1],1*a.Ra[2]);H.g(!1,!1);1!==++b%2&&(g+=t,g>X&&(c+=l,g=oa,c>m&&(c=n,e+=k,e>u&&(e=h))));O.Kb.Hb(1);w.set("s53");w.A("u47",ia);O.ra.b(0);H.g(!1,!1);J.Sc(I,Z);ma();if(!a.hc&&V.G)for(I=0;3>I;++I)O=C(I+a.Fb[0],a.Fb[1]),O=(2*O-1)*a.Tc[I],O+=a.Uc[I],ea[I]=O;la();I=Date.now();O=I-ka;var ca=C(a.Bb[0],
a.Bb[1]);Da=Aa(a.Cb[0],a.Cb[1],ca);ca=C(a.R[0],a.R[1]);var Fa=C(a.R[0]+1,a.R[1]),Ga=C(a.R[0]+2,a.R[1]);va=1-Aa(a.Eb[0],a.Eb[1],Math.sqrt(ca*ca+Fa*Fa+Ga*Ga)/O);ca=ha[0]-ea[0];Fa=ha[1]-ea[1];Ga=ha[2]-ea[2];O=Math.sqrt(ca*ca+Fa*Fa+Ga*Ga)/O;ha[0]=ea[0];ha[1]=ea[1];ha[2]=ea[2];Ba=1-Aa(a.Db[0],a.Db[1],O);ia=Da*va*Ba;ka=I;na[ra]=ia;ra=(ra+1)%a.La;for(I=0;I<a.La;++I)ia=Math.min(na[I],ia);lb.ed(Y,ia,T.ea);qa&&qa(ia,T.ea);if(V.G)for(I=a.Za[1]*ia+a.Za[0]*(1-ia),I*=T.ea,O=0;3>O;++O)ta[O]=I*ea[O]+(1-I)*ta[O],
da[O]=ta[O];else I=Date.now(),fa[0]=a.$a[0]*Math.sin(I*a.ab),fa[1]=a.$a[1]*Math.cos(I*a.ab),da[0]=fa[0],da[1]=fa[1],da[2]=fa[2];I=F;D.H();R.u();w.set("s52");I.ra.b(0);H.g(!1,!1)}});pa=ba.uc();v()}d=M;A=J.a({v:d,isPot:!1,isFloat:!1,isFlipY:!0});w.Rb([{id:"s49",name:"_",$:"attribute vec2 a0;uniform vec2 u34,u35;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u35+u34*a0;}",ca:["a0"],U:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u34",
"u35"],precision:"lowp"},{id:"s50",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",$:"attribute vec2 a0;uniform sampler2D u36;uniform vec2 u37;const vec2 f=vec2(.25,.5),h=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u36,f);vec2 b=a.gb,c=a.a*u37,d=a0*.5+e;vv0=b+(d-e)*c,gl_Position=vec4(a0,0.,1.);}",ca:["a0"],U:[2],f:["u1","u36","u37"],precision:"lowp"},{id:"s51",name:"_",$:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",
c:"uniform sampler2D u38,u36;uniform vec3 u39,u40;uniform float u41,u42,u43,u44,u45,u46,u47;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 g=texture2D(u38,vec2(.4375,.9375)),h=texture2D(u38,vec2(.5625,.9375)),a=texture2D(u36,vec2(.5,.5));float c=dot(g,e),i=dot(h,e);bool d=c>u44&&c>i+u45;d?a.r=2.:a.r>u43?a.r=0.:a.r>1.9&&(a.a>u42||a.a<u41)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u39,a.r=1.;else{float j=dot(e,texture2D(u38,vec2(.0625,.9375))),k=dot(e,texture2D(u38,vec2(.1875,.9375))),l=dot(e,texture2D(u38,vec2(.3125,.9375))),b;if(a.r>1.9)b=1.-u47;else b=1.,a.r=0.;float f=a.a*u46;a.gba+=vec3(j,k,l)*u40*b*f;}gl_FragColor=a;}",
f:"u38 u36 u39 u41 u42 u43 u44 u45 u40 u46 u47".split(" ")},{id:"s52",name:"_",c:"uniform sampler2D u36;uniform vec3 u51;uniform vec2 u37;varying vec2 vv0;const vec2 i=vec2(1.,1.);void main(){vec4 g=texture2D(u36,vec2(.25,.5));vec2 h=g.gb;float j=g.a;vec2 a=j*u37,c=h+a,d=h;d-=a/2.,c-=a/2.;vec2 k=.5*(d+c),f=step(d,vv0)*step(vv0,c);float l=f.x*f.y;vec2 b=2.*abs(k-vv0)/a;b=pow(b,3.*i),gl_FragColor=vec4(l*u51*max(b.x,b.y),1.);}",f:["u36","u37","u51"],precision:"lowp"},{id:"s53",name:"_",c:"uniform sampler2D u1,u5;uniform float u52,u53,u47;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);float c=(1.-u47)*(u53-u52)+u52;gl_FragColor=mix(b,a,c*f);}",
f:["u1","u5","u52","u53","u47"]}]);w.C("s50",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u36",value:1},{type:"2f",name:"u37",value:ua}]);w.C("s52",[{type:"1i",name:"u36",value:0},{type:"2f",name:"u37",value:ua},{type:"3f",name:"u51",value:[0,.5,1]}]);w.C("s51",[{type:"1i",name:"u38",value:0},{type:"1i",name:"u36",value:1},{type:"1f",name:"u41",value:a.Ic},{type:"1f",name:"u42",value:a.Fc},{type:"1f",name:"u43",value:a.gd},{type:"1f",name:"u44",value:a.Pb},{type:"1f",name:"u45",value:a.Ob},{type:"1f",
name:"u46",value:ua[0]}]);w.C("s53",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u5",value:1},{type:"1f",name:"u52",value:a.Ya[0]},{type:"1f",name:"u53",value:a.Ya[1]}]);R=J.a({isPot:!1,isFloat:!1,width:N,height:G});var S=new Float32Array([0,a.borderWidth,a.W,0]);(function(Q){Q.Ga=J.a({isPot:!1,Td:!0,isFloat:!1,width:N,height:G});Q.Ha=J.a({isPot:!0,isFloat:!1,width:a.ka});var I={width:1,height:1,isFloat:!0,isPot:!1,array:S};Q.ra=Na.a(I);Q.Kb=Na.a(I)})(F);ob?r(ob):ja(function(Q){Q=JSON.parse(Q);
r(Q)})},$c:function(M,la){for(var C in M)"undefined"!==typeof la[C]&&(M[C]=la[C])},cc:function(M){W.va&&W.va();var la={video:{facingMode:{ideal:mb.facingMode},width:{min:mb.minWidth,max:mb.maxWidth,ideal:mb.idealWidth},height:{min:mb.minHeight,max:mb.maxHeight,ideal:mb.idealHeight}},audio:W.Wa};mb.deviceId&&(constraints.deviceId=mb.deviceId);kb(function(C,ma){nb=ma;W.wa&&W.wa();M(C)},function(){window.sa&&window.sa("WEBCAM_UNAVAILABLE")},la)},sb:function(M,la){var C=M.videoWidth,ma=M.videoHeight;
Ma.ha().width=C;Ma.ha().height=ma;a.width=C;a.height=ma;ya.zc();var r=[.5,.5];ma/=C;C=Ma.F()/Ma.s();ma>C?1>=ma?r[0]*=ma:r[1]/=ma:(r[0]*=ma,ma=1/C,r[0]*=ma,r[1]*=ma);r[1]*=C;ya.i(M);w.C("s49",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u34",value:r},{type:"2f",name:"u35",value:[.5,.5]}]);la&&la()}};return ya}W.onLoad=function(b){W.ready?b():W.T.push(b)};W.set_audio=function(b){W.Wa=b};W.switch_displayVideo=function(b){W.ba=b;W.aa&&(W.aa.style.display=W.ba?"block":"none")};
W.onWebcamAsk=function(b){W.va=b};W.onContextLost=function(b){W.ua=b};W.onWebcamGet=function(b){W.wa=b};W.set_size=function(b,c){a.width=b;a.height=c};W.get_size=function(){return{width:a.width,height:a.height}};W.get_videoStream=function(){return nb};W.get_cv=function(){return Ma.ha()};W.set_color=function(b){w.C("s52",[{type:"3f",name:"u51",value:b}])};
W.init=function(b){var c=pb(),e=b.callbackReady?b.callbackReady:function(l){console.log("ERR:",l)},g=b.callbackReady?b.callbackReady.bind(!1):!1;if("undefined"===typeof b.canvasId)e("NO_CANVASID");else if(document.getElementById(b.canvasId))if(W.initialized)e("ALREADY_INITIALIZED");else{W.initialized=!0;window.sa=e?function(l){e(l);window.sa=!1}:!1;b.NNCpath&&(a.Ta=b.NNCpath);"undefined"!==typeof b.NNC&&(ob="string"===typeof b.NNC?JSON.parse(b.NNC):b.NNC);g&&W.T.push(g);if(!Ma.i({gb:b.canvasId,width:a.width,
height:a.height,debug:!1,Ia:!1,Pc:function(){W.ua&&W.ua()},premultipliedAlpha:!1}))return e("GL_INCOMPATIBLE"),!1;W.aa=Ma.ha();W.ba||(W.aa.style.display="none");H.i();D.i();w.i();J.i();q.depthFunc(q.LEQUAL);q.clearDepth(1);b.videoSettings&&b.videoSettings.videoElement?c.sb(b.videoSettings.videoElement,!1):(b.videoSettings&&c.$c(mb,b.videoSettings),c.cc(function(l){c.sb(l,!1)}));return!0}else e("INVALID_CANVASID")};window.JEEFACETRANSFERAPI=W;
;return JEEFACETRANSFERAPI;})();